<div class="p-5">
  <div class="bg-white overflow-hidden shadow rounded-lg border lg:w-[80%] lg:m-auto">
    <div class="px-4 py-5 sm:px-6">
      <div class="flex justify-between">
        <h3 class="text-lg leading-6 font-medium text-gray-900">
          User Profile
        </h3>
        @if (editMode()) {
        <div class="space-x-1">
          <!-- save button -->
          <button (click)="saveProfile()"
            class="px-4 py-3 rounded-xl text-sm font-semibold text-white no-underline bg-primary hover:bg-primaryHover transition-all text-center">Save</button>
          <!-- cancel button -->
          <button (click)="cancelEditMode()"
            class="px-4 py-3 rounded-xl text-sm font-semibold no-underline hover:bg-primary/10 transition-all text-primary">Cancel</button>

        </div>
        } @else {
        <button (click)="enableEditMode()"
          class="px-4 py-3 rounded-xl text-sm font-semibold no-underline hover:bg-primary/10 transition-all text-primary">Edit</button>
        }
      </div>
      <p class="mt-1 max-w-2xl text-sm text-gray-500">
        This is some information about the user.
      </p>
    </div>
    <form action="" [formGroup]="editForm">

      <div class="border-t border-gray-200 px-4 py-5 sm:p-0">
        <dl class="sm:divide-y sm:divide-gray-200">
          <div class="py-3 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
            <dt class="text-sm font-medium text-gray-500">
              First name
            </dt>

            <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
              @if (editMode()) {
              <input type="text" formControlName="firstname" class="w-full border rounded-lg min-h-8"
                [value]="user()?.firstname">
              <div class="error">
                @for (error of this.editForm.get('firstname')?.errors | keyvalue; track error.key) {
                <small class="text-error block">{{getErrorMessage(error.key, error.value)}}</small>
                }
              </div>
              } @else {
              {{user()?.firstname}}
              }
            </dd>

          </div>
          <div class="py-3 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
            <dt class="text-sm font-medium text-gray-500">
              Last name
            </dt>
            <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
              @if (editMode()) {
              <input type="text" formControlName="lastname" class="w-full border rounded-lg min-h-8"
                [value]="user()?.lastname">
              <div class="error">
                @for (error of this.editForm.get('lastname')?.errors | keyvalue; track error.key) {
                <small class="text-error block">{{getErrorMessage(error.key, error.value)}}</small>
                }
              </div>
              } @else {
              {{user()?.lastname}}
              }
            </dd>
          </div>
          <div class="py-3 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
            <dt class="text-sm font-medium text-gray-500">
              Email address
            </dt>
            <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
              {{user()?.email}}
            </dd>
          </div>
          <div class="py-3 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
            <dt class="text-sm font-medium text-gray-500">
              Date of Birth
            </dt>
            <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
              @if (editMode()) {
              <input type="date" formControlName="dob" class="w-full border rounded-lg min-h-8"
                [value]="user()?.dob | date:'MM/dd/yyyy'">
              <div class="error">
                @for (error of this.editForm.get('dob')?.errors | keyvalue; track error.key) {
                <small class="text-error block">{{getErrorMessage(error.key, error.value)}}</small>
                }
              </div>
              } @else {
              {{user()?.dob | date:'MM/dd/yyyy'}}
              }
            </dd>
          </div>
        </dl>
      </div>
      <div class="px-4 py-5 sm:px-6">
        <h3 class="text-lg leading-6 font-medium text-gray-900">
          Billing Address
        </h3>
      </div>
      <div class="border-t border-gray-200 px-4 py-5 sm:p-0">
        <dl class="sm:divide-y sm:divide-gray-200">
          <div class="py-3 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
            <dt class="text-sm font-medium text-gray-500">
              Street
            </dt>
            <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
              @if (editMode()) {
              <input type="text" formControlName="address_street" class="w-full border rounded-lg min-h-8"
                [value]="user()?.address?.street">
              <div class="error">
                @for (error of this.editForm.get('address_street')?.errors | keyvalue; track error.key) {
                <small class="text-error block">{{getErrorMessage(error.key, error.value)}}</small>
                }
              </div>
              } @else {
              {{user()?.address?.street}}
              }
            </dd>
          </div>
          <div class="py-3 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
            <dt class="text-sm font-medium text-gray-500">
              city
            </dt>
            <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
              @if (editMode()) {
              <input type="text" formControlName="address_city" class="w-full border rounded-lg min-h-8"
                [value]="user()?.address?.city">
              <div class="error">
                @for (error of this.editForm.get('address_city')?.errors | keyvalue; track error.key) {
                <small class="text-error block">{{getErrorMessage(error.key, error.value)}}</small>
                }
              </div>
              } @else {
              {{user()?.address?.city}}
              }
            </dd>
          </div>
          <div class="py-3 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
            <dt class="text-sm font-medium text-gray-500">
              State
            </dt>
            <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
              @if (editMode()) {
              <input type="text" formControlName="address_state" class="w-full border rounded-lg min-h-8"
                [value]="user()?.address?.state">
              <div class="error">
                @for (error of this.editForm.get('address_state')?.errors | keyvalue; track error.key) {
                <small class="text-error block">{{getErrorMessage(error.key, error.value)}}</small>
                }
              </div>
              } @else {
              {{user()?.address?.state}}
              }
            </dd>
          </div>
          <div class="py-3 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
            <dt class="text-sm font-medium text-gray-500">
              Country
            </dt>
            <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
              @if (editMode()) {
              <input type="text" formControlName="address_country" class="w-full border rounded-lg min-h-8"
                [value]="user()?.address?.country">
              <div class="error">
                @for (error of this.editForm.get('address_country')?.errors | keyvalue; track error.key) {
                <small class="text-error block">{{getErrorMessage(error.key, error.value)}}</small>
                }
              </div>
              } @else {
              {{user()?.address?.country}}
              }
            </dd>
          </div>
          <div class="py-3 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
            <dt class="text-sm font-medium text-gray-500">
              Zip Code
            </dt>
            <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
              @if (editMode()) {
              <input type="text" formControlName="address_zip_code" class="w-full border rounded-lg min-h-8"
                [value]="user()?.address?.zipCode">
              <div class="error">
                @for (error of this.editForm.get('address_zip_code')?.errors | keyvalue; track error.key) {
                <small class="text-error block">{{getErrorMessage(error.key, error.value)}}</small>
                }
              </div>
              } @else {
              {{user()?.address?.zipCode}}
              }

            </dd>
          </div>
        </dl>
      </div>
    </form>
  </div>
</div>
